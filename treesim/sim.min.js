!function(){const t=document.getElementById("simCanvas"),e=t.getContext("2d"),n={speed:1,branchChance:.035,branchAngle:22,wiggle:.08,gravity:0,phototropismStrength:.015,sunX:.5,sunY:20,isSunVisible:!0,taper:.83,initialWidth:28,minWidth:.5,segmentLength:5,seed:null,stopOnCollision:!1,collisionGraceSteps:3,startX:null,startY:null,startAngle:null,leafLength:30,leafWidth:15,leafColor:"#64c864",leafAngleVariance:.4,trunkColor:"#372514ff",useLightnessGradient:!0,maxTipAge:150,maxActiveTips:175,autoFadeTips:!0},a={speed:document.getElementById("speed"),chance:document.getElementById("chance"),angle:document.getElementById("angle"),wiggle:document.getElementById("wiggle"),initialWidth:document.getElementById("initial-width"),gravity:document.getElementById("gravity"),taper:document.getElementById("taper"),segmentLength:document.getElementById("segment-length"),seedInput:document.getElementById("seed"),seedLabel:document.getElementById("seed-label"),seedBtn:document.getElementById("seed-btn"),regenerateBtn:document.getElementById("btn-regenerate"),stopOnCollision:document.getElementById("stop-on-collision"),valStopCollision:document.getElementById("val-stop-collision"),btnStart:document.getElementById("btn-start"),btnReset:document.getElementById("btn-reset"),valSpeed:document.getElementById("val-speed"),valChance:document.getElementById("val-chance"),valAngle:document.getElementById("val-angle"),valWiggle:document.getElementById("val-wiggle"),valInitialWidth:document.getElementById("val-initial-width"),valGravity:document.getElementById("val-gravity"),phototropism:document.getElementById("phototropism"),valPhototropism:document.getElementById("val-phototropism"),sunX:document.getElementById("sun-x"),valSunX:document.getElementById("val-sun-x"),valTaper:document.getElementById("val-taper"),valSegmentLength:document.getElementById("val-segment-length"),collisionGrace:document.getElementById("collision-grace"),valCollisionGrace:document.getElementById("val-collision-grace"),btnCreateLeaves:document.getElementById("btn-create-leaves"),btnClearLeaves:document.getElementById("btn-clear-leaves"),leafSize:document.getElementById("leaf-size"),valLeafSize:document.getElementById("val-leaf-size"),leafWidth:document.getElementById("leaf-width"),valLeafWidth:document.getElementById("val-leaf-width"),leafColor:document.getElementById("leaf-color"),valLeafColor:document.getElementById("val-leaf-color"),statSegments:document.getElementById("segment-count"),statTips:document.getElementById("tip-count"),statLeaves:document.getElementById("leaf-count"),trunkColor:document.getElementById("trunk-color"),valTrunkColor:document.getElementById("val-trunk-color"),lightnessGradient:document.getElementById("lightness-gradient"),valLightnessGradient:document.getElementById("val-lightness-gradient"),maxTipAge:document.getElementById("max-tip-age"),valMaxTipAge:document.getElementById("val-max-tip-age"),maxActiveTips:document.getElementById("max-active-tips"),valMaxActiveTips:document.getElementById("val-max-active-tips"),autoFadeTips:document.getElementById("auto-fade-tips"),valAutoFade:document.getElementById("val-auto-fade"),preset1:document.getElementById("preset-1"),preset2:document.getElementById("preset-2"),preset3:document.getElementById("preset-3"),preset4:document.getElementById("preset-4")};let l=[],o=[],i=!0,s=null,r=0,d=null,g=null;class c{constructor(t,e,n,a,l){this.x=t,this.y=e,this.angle=n,this.width=a,this.parentIndex=l,this.drawn=!1,this.leaf=null}}class h{constructor(t,e,n,a,l,o=0){this.x=t,this.y=e,this.angle=n,this.width=a,this.parentIndex=l,this.age=o}}function u(t){for(;t<=-Math.PI;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;return t}let p=Math.random;function m(t){if(null===t||""===t)n.seed=null,p=Math.random,a.seedLabel&&(a.seedLabel.textContent="—");else{const e=Number(t)||0;n.seed=e,p=function(t){let e=t>>>0;return function(){e+=1831565813;let t=Math.imul(e^e>>>15,1|e);return t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}}(e),d=e,a.seedLabel&&(a.seedLabel.textContent=String(e))}}function v(n,a,o=-1){if(!l||0===l.length)return!1;const i=Math.floor(n),s=Math.floor(a);if(i<0||s<0||i>=t.width||s>=t.height)return!1;let r=-1,d=-1,g=-1;if(o>=0&&(r=o,l[o]&&l[o].parentIndex>=0)){d=l[o].parentIndex;const t=l[d]&&l[d].parentIndex;"number"==typeof t&&t>=0&&(g=t)}try{const t=e.getImageData(i,s,1,1).data,c=t[0],h=t[1],u=t[2];if(0!==t[3]&&(26!==c||26!==h||26!==u)){let t=-1,e=Number.POSITIVE_INFINITY,i=null;for(let o=0;o<l.length;o++){if(o===r||o===d||o===g)continue;const s=l[o];if(-1===s.parentIndex)continue;const c=l[s.parentIndex],h=s.x-c.x,u=s.y-c.y,p=h*h+u*u;if(p<=0)continue;let m=((n-c.x)*h+(a-c.y)*u)/p;m=Math.max(0,Math.min(1,m));const v=c.x+m*h,f=c.y+m*u,C=v-n,x=f-a,y=C*C+x*x;y<e&&(e=y,t=o,i=s)}if(i){const n=.6*Math.max(1,i.width/2)+.25;if(e<=(n+.5)*(n+.5)){if(t!==o)return!0}}}}catch(t){}for(let t=0;t<l.length;t++){if(t===r||t===d||t===g)continue;const e=l[t];if(-1===e.parentIndex)continue;const o=l[e.parentIndex],i=o.x,s=o.y,c=e.x-i,h=e.y-s,u=c*c+h*h;let p=0;u>0&&(p=((n-i)*c+(a-s)*h)/u,p=Math.max(0,Math.min(1,p)));const m=i+p*c-n,v=s+p*h-a,f=m*m+v*v,C=Math.max(1,e.width/2);if(f<=(C+1)*(C+1))return!0}return!1}function f(){t.width=window.innerWidth,t.height=window.innerHeight,!i&&l.length>0&&x()}function C(){if(null===n.seed&&null===d){const t=Math.floor(2147483647*Math.random());a.seedInput.value=t,m(t)}else null===n.seed&&null!==d?m(d):null!==n.seed&&m(n.seed);l=[],o=[],r=0,g=n.maxTipAge;const i=null!==n.startX?n.startX:t.width/2,s=null!==n.startY?n.startY:t.height,c=null!==n.startAngle?n.startAngle:-Math.PI/2;o.push(new h(i,s,c,n.initialWidth,-1)),e.fillStyle="#1a1a1a",e.fillRect(0,0,t.width,t.height),I()}function x(){let a;if(e.fillStyle="#1a1a1a",e.fillRect(0,0,t.width,t.height),e.lineCap="round",e.lineJoin="round",n.useLightnessGradient){const{h:t,s:e}=function(t){let e,n,a;3===(t=t.replace(/^#/,"")).length?(e=parseInt(t[0]+t[0],16)/255,n=parseInt(t[1]+t[1],16)/255,a=parseInt(t[2]+t[2],16)/255):(e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,a=parseInt(t.substring(4,6),16)/255);const l=Math.max(e,n,a),o=Math.min(e,n,a),i=l-o;let s=0,r=0,d=(l+o)/2;return 0!==i&&(r=d>.5?i/(2-l-o):i/(l+o),s=l===e?((n-a)/i+(n<a?6:0))/6:l===n?((a-e)/i+2)/6:((e-n)/i+4)/6),{h:Math.round(360*s),s:Math.round(100*r),l:Math.round(100*d)}}(n.trunkColor);a={h:t,s:e,useGradient:!0}}else a={color:n.trunkColor,useGradient:!1};for(let t=0;t<l.length;t++){const n=l[t];if(-1===n.parentIndex)continue;const o=l[n.parentIndex],i=n.width;if(a.useGradient){const t=Math.max(30,Math.min(70,70-3*i));e.strokeStyle=`hsl(${a.h}, ${a.s}%, ${t}%)`}else e.strokeStyle=a.color;if(e.lineWidth=i,e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(n.x,n.y),e.stroke(),n.leaf){const t=n.leaf,a=n.angle+(t.angleOffset||0);S(e,n.x,n.y,a,t.length,t.width,t.color)}}n.isSunVisible&&function(t,e,n){const a=12,l=t.createRadialGradient(e,n,.2*a,e,n,a);l.addColorStop(0,"rgba(255,245,120,0.95)"),l.addColorStop(1,"rgba(255,200,30,0.6)"),t.beginPath(),t.fillStyle=l,t.arc(e,n,a,0,2*Math.PI),t.fill(),t.beginPath(),t.fillStyle="rgba(255,235,120,0.06)",t.arc(e,n,a+8,0,2*Math.PI),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(255,255,255,0.15)",t.beginPath(),t.arc(e,n,a,0,2*Math.PI),t.stroke()}(e,n.sunX*t.width,n.sunY)}function y(){i?(!function(){if(i){for(r+=n.speed;r>=1&&(r-=1,0!==o.length);){let e=[];const s=n.segmentLength,r=n.wiggle,d=n.gravity,m=(n.branchChance,n.branchAngle*Math.PI/180),f=(n.taper,.999),C=n.minWidth,x=!!n.stopOnCollision,y=(n.collisionGraceSteps,t.width),S=t.height;for(let t=0;t<o.length;t++){const a=o[t];if(a.width<C||a.x<0||a.x>y||a.y<0||a.y>S)continue;const i=(p()-.5)*r,I=p(),b=d;let T=a.angle+i+b;const L=n.phototropismStrength||0;if(0!==L){const t=("number"==typeof n.sunX?n.sunX:.5)*y,e=null!==n.sunY?n.sunY:0,l=Math.atan2(e-a.y,t-a.x),o=e<S/2?Math.min(1,a.y/S):Math.min(1,(S-a.y)/S);T+=L*u(l-T)*o}const A=a.x+Math.cos(T)*s,M=a.y+Math.sin(T)*s;a.age++;const E=n.autoFadeTips?g:n.maxTipAge;if(a.age>=E)continue;const k=n.collisionGraceSteps||0;if(x&&a.age>=k&&v(A,M,a.parentIndex))continue;const G=l.length;if(l.push(new c(A,M,T,a.width,a.parentIndex)),I<n.branchChance){const t=m;e.push(new h(A,M,T-t,a.width*n.taper,G,0)),e.push(new h(A,M,T+t,a.width*n.taper,G,0))}else e.push(new h(A,M,T,a.width*f,G,a.age))}e.length>n.maxActiveTips&&(e.sort((t,e)=>{if(e.age!==t.age)return e.age-t.age;const n=e.x-t.x;return Math.abs(n)>.001?n:e.y-t.y}),e=e.slice(e.length-n.maxActiveTips)),o=e,n.autoFadeTips&&o.length>0&&o.reduce((t,e)=>t+e.width,0)/o.length<2&&g>0&&(g*=.75),0===o.length&&i&&(i=!1,a.btnStart.textContent="▶",a.btnStart.title="Play",a.btnStart.style.backgroundColor="#fbbf24",a.btnStart.style.color="#000")}I()}}(),x(),s=requestAnimationFrame(y)):s=null}function S(t,e,n,a,l,o,i){const s=e+Math.cos(a)*l,r=n+Math.sin(a)*l,d=(e+s)/2,g=(n+r)/2,c=a-Math.PI/2,h=d+Math.cos(c)*o,u=g+Math.sin(c)*o,p=d+Math.cos(c+Math.PI)*o,m=g+Math.sin(c+Math.PI)*o;t.beginPath(),t.moveTo(e,n),t.quadraticCurveTo(h,u,s,r),t.quadraticCurveTo(p,m,e,n),t.fillStyle=i||"rgba(100,200,100,0.85)",t.fill(),t.strokeStyle="rgba(0,0,0,0.25)",t.lineWidth=Math.max(1,.15*o),t.beginPath(),t.moveTo(e,n),t.lineTo(s,r),t.stroke()}function I(){a.statSegments.textContent=l.length,a.statTips.textContent=o.length,a.statLeaves&&(a.statLeaves.textContent=l.reduce((t,e)=>e.leaf?t+1:t,0))}const b={speed:"speed",branchChance:"chance",branchAngle:"angle",wiggle:"wiggle",gravity:"gravity",phototropismStrength:"phototropism",sunX:"sunX",initialWidth:"initialWidth",taper:"taper",segmentLength:"segmentLength",collisionGraceSteps:"collisionGrace",stopOnCollision:"stopOnCollision",leafLength:"leafSize",leafWidth:"leafWidth",trunkColor:"trunkColor",maxTipAge:"maxTipAge",maxActiveTips:"maxActiveTips"};function T(t){for(const e in t){if(!t.hasOwnProperty(e))continue;n[e]=t[e];const l=b[e]||e;if(a[l])try{a[l].value=t[e]}catch(t){}"speed"===e&&a.valSpeed&&(a.valSpeed.textContent=n.speed),"branchChance"===e&&a.valChance&&(a.valChance.textContent=n.branchChance),"branchAngle"===e&&a.valAngle&&(a.valAngle.textContent=n.branchAngle),"wiggle"===e&&a.valWiggle&&(a.valWiggle.textContent=n.wiggle),"gravity"===e&&a.valGravity&&(a.valGravity.textContent=n.gravity),"phototropismStrength"===e&&a.valPhototropism&&(a.valPhototropism.textContent=n.phototropismStrength.toFixed(3)),"sunX"===e&&a.valSunX&&(a.valSunX.textContent=n.sunX.toFixed(2)),"initialWidth"===e&&a.valInitialWidth&&(a.valInitialWidth.textContent=n.initialWidth),"taper"===e&&a.valTaper&&(a.valTaper.textContent=n.taper),"segmentLength"===e&&a.valSegmentLength&&(a.valSegmentLength.textContent=n.segmentLength),"collisionGraceSteps"===e&&a.valCollisionGrace&&(a.valCollisionGrace.textContent=n.collisionGraceSteps),"stopOnCollision"===e&&a.stopOnCollision&&(a.stopOnCollision.checked=!!n.stopOnCollision),"stopOnCollision"===e&&a.valStopCollision&&(a.valStopCollision.textContent=n.stopOnCollision?"on":"off"),"leafLength"===e&&a.valLeafSize&&(a.valLeafSize.textContent=n.leafLength),"leafWidth"===e&&a.valLeafWidth&&(a.valLeafWidth.textContent=n.leafWidth),"trunkColor"===e&&a.valTrunkColor&&(a.valTrunkColor.textContent=n.trunkColor),"useLightnessGradient"===e&&a.lightnessGradient&&(a.lightnessGradient.checked=!!n.useLightnessGradient),"useLightnessGradient"===e&&a.valLightnessGradient&&(a.valLightnessGradient.textContent=n.useLightnessGradient?"on":"off"),"maxTipAge"===e&&a.valMaxTipAge&&(a.valMaxTipAge.textContent=n.maxTipAge),"maxActiveTips"===e&&a.valMaxActiveTips&&(a.valMaxActiveTips.textContent=n.maxActiveTips),"autoFadeTips"===e&&a.autoFadeTips&&(a.autoFadeTips.checked=!!n.autoFadeTips),"autoFadeTips"===e&&a.valAutoFade&&(a.valAutoFade.textContent=n.autoFadeTips?"on":"off")}C(),i||(i=!0,a.btnStart.textContent="⏹",a.btnStart.title="Stop",a.btnStart.style.backgroundColor="#4ade80",a.btnStart.style.color="#003300",null===s&&y())}function L(){const t=function(){const t=new Array(l.length).fill(!1);for(let e=0;e<l.length;e++){const n=l[e].parentIndex;n>=0&&n<l.length&&(t[n]=!0)}const e=[];for(let n=0;n<l.length;n++)-1!==l[n].parentIndex&&(t[n]||e.push(n));return e}();for(let e of t){const t=l[e],a=n.leafLength+(p()-.5)*n.leafLength*.2,o=Math.max(1,Math.round(n.leafWidth+2*(p()-.5))),i=n.leafColor,s=2*(p()-.5)*n.leafAngleVariance;t.leaf={length:a,width:o,color:i,angleOffset:s}}}a.speed.oninput=t=>{n.speed=parseFloat(t.target.value),a.valSpeed&&(a.valSpeed.textContent=n.speed)},a.chance.oninput=t=>{n.branchChance=parseFloat(t.target.value),a.valChance&&(a.valChance.textContent=n.branchChance)},a.angle.oninput=t=>{n.branchAngle=parseInt(t.target.value),a.valAngle&&(a.valAngle.textContent=n.branchAngle)},a.wiggle.oninput=t=>{n.wiggle=parseFloat(t.target.value),a.valWiggle&&(a.valWiggle.textContent=n.wiggle)},a.initialWidth.oninput=t=>{n.initialWidth=parseInt(t.target.value),a.valInitialWidth&&(a.valInitialWidth.textContent=n.initialWidth)},a.gravity.oninput=t=>{n.gravity=parseFloat(t.target.value),a.valGravity&&(a.valGravity.textContent=n.gravity)},a.taper.oninput=t=>{n.taper=parseFloat(t.target.value),a.valTaper&&(a.valTaper.textContent=n.taper)},a.segmentLength.oninput=t=>{n.segmentLength=parseInt(t.target.value),a.valSegmentLength&&(a.valSegmentLength.textContent=n.segmentLength)},a.seedBtn.onclick=()=>{const t=a.seedInput.value;m(""===t?null:Number(t)),C()},a.stopOnCollision.checked=!!n.stopOnCollision,a.valStopCollision&&(a.valStopCollision.textContent=n.stopOnCollision?"on":"off");const A=t=>{n.stopOnCollision=!!t,a.valStopCollision&&(a.valStopCollision.textContent=n.stopOnCollision?"on":"off")};a.stopOnCollision.addEventListener("input",t=>A(t.target.checked)),a.stopOnCollision.addEventListener("change",t=>A(t.target.checked)),a.autoFadeTips.checked=!!n.autoFadeTips,a.valAutoFade&&(a.valAutoFade.textContent=n.autoFadeTips?"on":"off");const M=t=>{n.autoFadeTips=!!t,a.valAutoFade&&(a.valAutoFade.textContent=n.autoFadeTips?"on":"off")};a.autoFadeTips.addEventListener("input",t=>M(t.target.checked)),a.autoFadeTips.addEventListener("change",t=>M(t.target.checked)),a.collisionGrace.value=n.collisionGraceSteps,a.valCollisionGrace&&(a.valCollisionGrace.textContent=n.collisionGraceSteps),a.collisionGrace.oninput=t=>{n.collisionGraceSteps=parseInt(t.target.value||0),a.valCollisionGrace&&(a.valCollisionGrace.textContent=n.collisionGraceSteps)},a.phototropism.value=n.phototropismStrength,a.valPhototropism&&(a.valPhototropism.textContent=n.phototropismStrength.toFixed(3)),a.phototropism.oninput=t=>{n.phototropismStrength=parseFloat(t.target.value),a.valPhototropism&&(a.valPhototropism.textContent=n.phototropismStrength.toFixed(3))},a.sunX.value=n.sunX,a.valSunX&&(a.valSunX.textContent=n.sunX.toFixed(2)),a.sunX.oninput=t=>{n.sunX=parseFloat(t.target.value),a.valSunX&&(a.valSunX.textContent=n.sunX.toFixed(2))},a.preset1.onclick=()=>T({speed:1,branchChance:.035,branchAngle:22,wiggle:.08,gravity:0,phototropismStrength:.015,sunX:.5,sunY:20,isSunVisible:!0,startX:null,startY:null,startAngle:null,initialWidth:28,taper:.83,segmentLength:5,collisionGraceSteps:3,stopOnCollision:!1,leafLength:30,leafWidth:15,trunkColor:"#211b11ff",useLightnessGradient:!0,maxTipAge:150,maxActiveTips:175,autoFadeTips:!0}),a.preset2.onclick=()=>T({speed:1,branchChance:.065,branchAngle:22,wiggle:.27,gravity:0,phototropismStrength:.015,sunX:.5,sunY:1e4,isSunVisible:!1,startX:null,startY:0,startAngle:Math.PI/2,initialWidth:5,taper:.81,segmentLength:4,collisionGraceSteps:5,stopOnCollision:!1,leafLength:10,leafWidth:4,trunkColor:"#6b4423",useLightnessGradient:!0,maxTipAge:170,maxActiveTips:75,autoFadeTips:!1}),a.preset3.onclick=()=>T({speed:1,branchChance:.055,branchAngle:22,wiggle:.06,gravity:0,phototropismStrength:.015,sunX:.5,sunY:20,isSunVisible:!0,startX:null,startY:null,startAngle:null,initialWidth:16,taper:.9,segmentLength:4,collisionGraceSteps:5,stopOnCollision:!1,leafLength:14,leafWidth:6,trunkColor:"#30460aff",useLightnessGradient:!0,maxTipAge:40,maxActiveTips:75,autoFadeTips:!0}),a.preset4.onclick=()=>T({speed:1,branchChance:.015,branchAngle:90,wiggle:.01,gravity:0,phototropismStrength:0,sunX:.5,sunY:20,isSunVisible:!1,startX:null,startY:null,startAngle:null,initialWidth:5,taper:1,segmentLength:5,collisionGraceSteps:3,stopOnCollision:!0,leafLength:1,leafWidth:1,trunkColor:"#9eb1c6ff",useLightnessGradient:!1,maxTipAge:1e3,maxActiveTips:200,autoFadeTips:!1}),a.leafSize.value=n.leafLength,a.valLeafSize.textContent=n.leafLength,a.leafSize.oninput=t=>{n.leafLength=parseInt(t.target.value),a.valLeafSize&&(a.valLeafSize.textContent=n.leafLength)},a.leafWidth.value=n.leafWidth,a.valLeafWidth.textContent=n.leafWidth,a.leafWidth.oninput=t=>{n.leafWidth=parseInt(t.target.value),a.valLeafWidth&&(a.valLeafWidth.textContent=n.leafWidth)},a.leafColor.value=n.leafColor,a.valLeafColor.textContent=n.leafColor,a.leafColor.oninput=t=>{n.leafColor=t.target.value,a.valLeafColor&&(a.valLeafColor.textContent=n.leafColor)},a.trunkColor.value=n.trunkColor,a.valTrunkColor.textContent=n.trunkColor,a.trunkColor.oninput=t=>{n.trunkColor=t.target.value,a.valTrunkColor&&(a.valTrunkColor.textContent=n.trunkColor)},a.lightnessGradient.checked=!!n.useLightnessGradient,a.valLightnessGradient&&(a.valLightnessGradient.textContent=n.useLightnessGradient?"on":"off");const E=t=>{n.useLightnessGradient=!!t,a.valLightnessGradient&&(a.valLightnessGradient.textContent=n.useLightnessGradient?"on":"off")};a.lightnessGradient.addEventListener("input",t=>E(t.target.checked)),a.lightnessGradient.addEventListener("change",t=>E(t.target.checked)),a.maxTipAge.value=n.maxTipAge,a.valMaxTipAge.textContent=n.maxTipAge,a.maxTipAge.oninput=t=>{n.maxTipAge=parseInt(t.target.value),a.valMaxTipAge&&(a.valMaxTipAge.textContent=n.maxTipAge)},a.maxActiveTips.value=n.maxActiveTips,a.valMaxActiveTips.textContent=n.maxActiveTips,a.maxActiveTips.oninput=t=>{n.maxActiveTips=parseInt(t.target.value),a.valMaxActiveTips&&(a.valMaxActiveTips.textContent=n.maxActiveTips)},a.btnCreateLeaves.onclick=()=>{L(),i||x()},a.btnClearLeaves.onclick=()=>{!function(){for(let t=0;t<l.length;t++)l[t].leaf=null}(),i||x()},a.btnStart.onclick=()=>{i=!i,i?(a.btnStart.textContent="⏹",a.btnStart.title="Stop",a.btnStart.style.backgroundColor="#4ade80",a.btnStart.style.color="#003300",null===s&&y()):(a.btnStart.textContent="▶",a.btnStart.title="Play",a.btnStart.style.backgroundColor="#fbbf24",a.btnStart.style.color="#000")},a.btnReset.onclick=()=>{const t=Math.floor(2147483647*Math.random());a.seedInput.value=t,m(t),C(),i||(i=!0,a.btnStart.textContent="⏹",a.btnStart.title="Stop",a.btnStart.style.backgroundColor="#4ade80",a.btnStart.style.color="#003300",null===s&&y())},a.regenerateBtn.onclick=()=>{if(null!==n.seed)m(n.seed);else if(null!==d)m(d),a.seedInput.value=d;else{const t=Math.floor(2147483647*Math.random());a.seedInput.value=t,m(t)}C(),i||(i=!0,a.btnStart.textContent="⏹",a.btnStart.title="Stop",a.btnStart.style.backgroundColor="#4ade80",a.btnStart.style.color="#003300",null===s&&y())},window.addEventListener("resize",f),f(),m(null),C(),a.btnStart.textContent="⏹",a.btnStart.title="Stop",a.btnStart.style.backgroundColor="#4ade80",a.btnStart.style.color="#003300",a.btnReset.textContent="Generate new",y()}();
